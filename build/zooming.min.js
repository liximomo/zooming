!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Zooming=e()}(this,function(){"use strict";function t(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function e(t,e,n,o,r){var i=void 0!==r&&r,a=null;a="string"==typeof t?document.querySelectorAll(t):[].concat(t);var s=function(t){t.addEventListener(e,function(t){for(var e=t.target;e&&e!==this;e=e.parentNode){var r=!1;if(e.matches?r=e.matches(n):e.webkitMatchesSelector?r=e.webkitMatchesSelector(n):e.mozMatchesSelector?r=e.mozMatchesSelector(n):e.msMatchesSelector?r=e.msMatchesSelector(n):e.oMatchesSelector&&(r=e.oMatchesSelector(n)),r){o.call(e,t);break}}},i)};Array.prototype.forEach.call(a,s)}"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,o=arguments.length;for(n=0;n<o;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():!function(t){if("Element"in t){var e="classList",n="prototype",o=t.Element[n],r=Object,i=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},s=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},c=function(t,e){if(""===e)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},l=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,r=n.length;o<r;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],d=function(){return new l(this)};if(s[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return t+="",c(this,t)!==-1},u.add=function(){var t,e=arguments,n=0,o=e.length,r=!1;do t=e[n]+"",c(this,t)===-1&&(this.push(t),r=!0);while(++n<o);r&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,o=0,r=n.length,i=!1;do for(t=n[o]+"",e=c(this,t);e!==-1;)this.splice(e,1),i=!0,e=c(this,t);while(++o<r);i&&this._updateClassName()},u.toggle=function(t,e){t+="";var n=this.contains(t),o=n?e!==!0&&"remove":e!==!1&&"add";return o&&this[o](t),e===!0||e===!1?e:!n},u.toString=function(){return this.join(" ")},r.defineProperty){var f={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(o,e,f)}catch(t){void 0!==t.number&&t.number!==-2146823252||(f.enumerable=!1,r.defineProperty(o,e,f))}}else r[n].__defineGetter__&&o.__defineGetter__(e,d)}}(self));var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;Object.assign=function(e,i){for(var a,s,c=t(e),l=1;l<arguments.length;l++){a=Object(arguments[l]);for(var u in a)o.call(a,u)&&(c[u]=a[u]);if(n){s=n(a);for(var d=0;d<s.length;d++)r.call(a,s[d])&&(c[s[d]]=a[s[d]])}}return c};var i=document.body,a=document.documentElement,s="WebkitAppearance"in document.documentElement.style?"-webkit-":"",c=function(t){return function(e){return e/t}},l=c(2),u=function(t,e){var n=new Image;n.onload=function(){e&&e(n)},n.src=t},d=function(){return window.pageYOffset||(a||i.parentNode||i).scrollTop},f=function(){var t=a.clientWidth||i.clientWidth,e=a.clientHeight||i.clientHeight;return{x:l(t),y:l(e)}},m=function(t,e,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.forEach(function(e){o?t.addEventListener(e,n[e]):t.removeEventListener(e,n[e])})},v=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);var n=t.indexOf("Trident/");if(n>0){var o=t.indexOf("rv:");return parseInt(t.substring(o+3,t.indexOf(".",o)),10)}var r=t.indexOf("Edge/");return r>0&&parseInt(t.substring(r+5,t.indexOf(".",r)),10)},h={defaultZoomable:'img[data-action="zoom"]',enableGrab:!0,preloadImage:!0,transitionDuration:.4,transitionTimingFunction:"cubic-bezier(0.4, 0, 0, 1)",bgColor:"rgb(255, 255, 255)",bgOpacity:1,scaleBase:1,scaleExtra:.5,scrollThreshold:40,onOpen:null,onClose:null,onRelease:null,onBeforeOpen:null,onBeforeClose:null,onBeforeGrab:null,onBeforeMove:null,onBeforeRelease:null},g={target:{close:null,open:null},overlay:{init:{zIndex:998,backgroundColor:h.bgColor,position:"fixed",top:0,left:0,right:0,bottom:0,opacity:0,transition:"opacity\n        "+h.transitionDuration+"s\n        "+h.transitionTimingFunction}},cursor:{default:"auto",zoomIn:s+"zoom-in",zoomOut:s+"zoom-out",grab:s+"grab",move:"move"}},p=function(t){var e={},n=["webkitTransition","mozTransition","oTransition","msTransition","transition"],o=["webkitTransform","mozTransform","oTransform","msTransform","transform"],r={webkitTransition:"webkitTransitionEnd",mozTransition:"transitionend",oTransition:"oTransitionEnd otransitionend",msTransition:"msTransitionEnd",transition:"transitionend"};return n.some(function(n){if(void 0!==t.style[n])return e.transitionProp=n,e.transEndEvent=r[n],!0}),o.some(function(n){if(void 0!==t.style[n])return e.transformProp=n,e.transformCssProp=n.replace(/(.*)Transform/,"-$1-transform"),!0}),e},b=function(t,e){return function(n,o,r){var i=void 0;o.transition&&(i=o.transition,delete o.transition,o[t]=i),o.transform&&(i=o.transform,delete o.transform,o[e]=i);var a=n.style,s={};for(var c in o)r&&(s[c]=a[c]||""),a[c]=o[c];return s}},y=function(t){var e=f(),n={x:t.left+l(t.width),y:t.top+l(t.height)};return{x:e.x-n.x,y:e.y-n.y}},E=function(t,e,n){var o=l(t.width),r=l(t.height),i={x:n.x-o,y:n.y-r},a=i.x/o,s=i.y/r;return e+Math.min(a,s)},x=2,w=function(t,e){for(var n=t.length,o=t[0],r=n>1,i=h.scaleExtra,a=t.length,s=0,c=0,l={x:o.clientX,y:o.clientY},u={x:o.clientX,y:o.clientY};a--;){var d=t[a],f=[d.clientX,d.clientY],m=f[0],v=f[1];s+=m,c+=v,r&&(m<l.x?l.x=m:m>u.x&&(u.x=m),v<l.y?l.y=v:v>u.y&&(u.y=v))}if(r){var g=u.x-l.x,p=u.y-l.y;i=g>p?g/window.innerWidth*x:p/window.innerHeight*x}e(s/n,c/n,i)},T=void 0,O=200,L=["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],A=document.body,k=document.createElement("div"),C=void 0,M=void 0,S=v(),z=!1,B=!1,I=!0,_=null,D=void 0,N=void 0,R=void 0,j=void 0,G=p(k),P=G.transformCssProp,Y=G.transEndEvent,W=b(G.transitionProp,G.transformProp),X=function(t,e,n){return W(t,e,n)},F={click:function(t){t.preventDefault(),z?I?q.close():q.release():q.open(t.target)},scroll:function(){var t=d();null===_&&(_=t);var e=_-t;Math.abs(e)>=h.scrollThreshold&&(_=null,q.close())},keydown:function(t){var e=t.key||t.code;"Escape"!==e&&27!==t.keyCode||(I?q.close():q.release(function(){return q.close()}))},mousedown:function(t){0===t.button&&(t.preventDefault(),j=setTimeout(function(){q.grab(t.clientX,t.clientY)},O))},mousemove:function(t){I||q.move(t.clientX,t.clientY)},mouseup:function(t){0===t.button&&(clearTimeout(j),I?q.close():q.release())},touchstart:function(t){t.preventDefault(),j=setTimeout(function(){w(t.touches,function(t,e,n){q.grab(t,e,n)})},O)},touchmove:function(t){I||w(t.touches,function(t,e,n){q.move(t,e,n)})},touchend:function(t){t.targetTouches.length>0||(clearTimeout(j),I?q.close():q.release())}},H={bgOpacity:"bg-opacity"},Z=function(t){return t in H?H[t]:t},q={listen:function(t,n){if(n&&e(t,"click",n,F.click),"string"==typeof t){for(var o=document.querySelectorAll(t),r=o.length;r--;)q.listen(o[r]);return T}if("IMG"===t.tagName)return t.style.cursor=g.cursor.zoomIn,t.addEventListener("click",F.click),h.preloadImage&&t.hasAttribute("data-original")&&u(t.getAttribute("data-original")),T},open:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.onOpen;if(!z&&!B&&(C="string"==typeof t?document.querySelector(t):t,"IMG"===C.tagName)){var n=Object.assign(h),o=["bgOpacity"];o.forEach(function(t){var e=null;null!=(e=C.getAttribute("data-"+Z(t)))&&(n[t]=e)});var r=f();C.hasAttribute("data-width")&&C.hasAttribute("data-height")&&(r.x=Math.min(r.x,C.getAttribute("data-width")/2),r.y=Math.min(r.y,C.getAttribute("data-height")/2)),n.onBeforeOpen&&n.onBeforeOpen(C),z=!0,B=!0,M=C.parentNode,!n.preloadImage&&C.hasAttribute("data-original")&&u(C.getAttribute("data-original"));var i=C.getBoundingClientRect();D=y(i),N=E(i,n.scaleBase,r),C.offsetWidth;var a=window.getComputedStyle(C);g.target.open={position:a.position&&"static"!==a.position?a.position:"relative",zIndex:999,cursor:n.enableGrab?g.cursor.grab:g.cursor.zoomOut,transition:P+"\n        "+n.transitionDuration+"s\n        "+n.transitionTimingFunction,transform:"translate("+D.x+"px, "+D.y+"px) "+(S?"":"translateZ(0)")+" scale("+N+")"},g.target.close=X(C,g.target.open,!0),M.appendChild(k),setTimeout(function(){return k.style.opacity=n.bgOpacity},30),document.addEventListener("scroll",F.scroll),document.addEventListener("keydown",F.keydown);var s=function t(){C.classList.add("is-zoomed"),C.removeEventListener(Y,t),B=!1,n.enableGrab&&m(document,L,F,!0),C.hasAttribute("data-original")&&!function(){R=C.getAttribute("src");var t=C.getAttribute("data-original"),e=C.cloneNode(!1);e.setAttribute("src",t),e.style.position="fixed",e.style.visibility="hidden",A.appendChild(e),setTimeout(function(){C.setAttribute("src",t),A.removeChild(e)},10)}(),e&&e(C)};return Y?C.addEventListener(Y,s):s(),T}},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.onClose;if(z&&!B){h.onBeforeClose&&h.onBeforeClose(C),B=!0,C.offsetWidth,A.style.cursor=g.cursor.default,k.style.opacity=0,X(C,{transform:"none"}),document.removeEventListener("scroll",F.scroll),document.removeEventListener("keydown",F.keydown);var e=function e(){C.classList.remove("is-zoomed"),C.removeEventListener(Y,e),z=!1,B=!1,h.enableGrab&&m(document,L,F,!1),C.hasAttribute("data-original")&&C.setAttribute("src",R),X(C,g.target.close),M.removeChild(k),t&&t(C)};return Y?C.addEventListener(Y,e):e(),T}},grab:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.scaleExtra,o=arguments[3];if(z&&!B){h.onBeforeGrab&&h.onBeforeGrab(C),I=!1;var r=f(),i=r.x-t,a=r.y-e;X(C,{cursor:g.cursor.move,transform:"translate("+(D.x+i)+"px, "+(D.y+a)+"px)\n        scale("+(N+n)+")"}),C.addEventListener(Y,function t(){C.removeEventListener(Y,t),o&&o(C)})}},move:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.scaleExtra,o=arguments[3];if(z&&!B){h.onBeforeMove&&h.onBeforeMove(C),I=!1;var r=f(),i=r.x-t,a=r.y-e;X(C,{transition:P,transform:"translate("+(D.x+i)+"px, "+(D.y+a)+"px)\n        scale("+(N+n)+")"}),A.style.cursor=g.cursor.move,C.addEventListener(Y,function t(){C.removeEventListener(Y,t),o&&o(C)})}},release:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.onRelease;if(z&&!B)return h.onBeforeRelease&&h.onBeforeRelease(C),B=!0,X(C,g.target.open),A.style.cursor=g.cursor.default,C.addEventListener(Y,function e(){C.removeEventListener(Y,e),B=!1,I=!0,t&&t(C)}),T},config:function(t){if(!t)return h;for(var e in t)h[e]=t[e];return X(k,{backgroundColor:h.bgColor,transition:"opacity\n        "+h.transitionDuration+"s\n        "+h.transitionTimingFunction}),T}};return X(k,g.overlay.init),k.setAttribute("id","zoom-overlay"),k.addEventListener("click",function(){return q.close()}),document.addEventListener("DOMContentLoaded",function(){q.listen(h.defaultZoomable)}),q});
//# sourceMappingURL=zooming.min.js.map
